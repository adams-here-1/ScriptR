var scroll=0;function zoom(e){(e=window.event||e).preventDefault(),e.stopPropagation(),-1==(scroll=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)))&&maxScreenHeight<1e4&&(maxScreenHeight+=250,maxScreenWidth+=250,resize(),scroll=0),1==scroll&&maxScreenHeight>1e3&&(maxScreenHeight-=250,maxScreenWidth-=250,resize(),scroll=0)}mainCanvas.addEventListener?(window.addEventListener("mousewheel",zoom,!1),mainCanvas.addEventListener("DOMMouseScroll",zoom,!1)):window.attachEvent("onmousewheel",zoom),mainCanvas.onkeydown=function(e){var t=e.keyCode?e.keyCode:e.which;if(70==t&&maxScreenHeight<1e4&&(maxScreenHeight+=250,maxScreenWidth+=250,resize()),67==t&&maxScreenHeight>1e3&&(maxScreenHeight-=250,maxScreenWidth-=250,resize()),65!=a&&37!=a||(cameraKeys.l=0,updateCameraInput()),68!=a&&39!=a||(cameraKeys.r=0,updateCameraInput()),87!=a&&38!=a||(cameraKeys.u=0,updateCameraInput()),83!=a&&40!=a||(cameraKeys.d=0,updateCameraInput()),32==a){var n=unitList.indexOf(activeUnit);sendUnit(n)}null!=upgrInputsToIndex["k"+a]&&toggleActiveUnit(upgrInputsToIndex["k"+a]),46==a&&selUnits.length&&sellSelUnits(),84==a&&toggleChat("none"==chatListWrapper.style.display),27==a&&(toggleActiveUnit(),disableSelUnit(),showSelector=!1),82==a&&(camY=camX=0)},mainCanvas.onkeydown=function(e){e=e.keyCode?e.keyCode:e.which,socket&&player&&!player.dead&&(65!=e&&37!=e||cameraKeys.l||(cameraKeys.l=-1,cameraKeys.r=0,updateCameraInput()),68!=e&&39!=e||cameraKeys.r||(cameraKeys.r=1,cameraKeys.l=0,updateCameraInput()),87!=e&&38!=e||cameraKeys.u||(cameraKeys.u=-1,cameraKeys.d=0,updateCameraInput()),83!=e&&40!=e||cameraKeys.d||(cameraKeys.d=1,cameraKeys.u=0,updateCameraInput()))};
